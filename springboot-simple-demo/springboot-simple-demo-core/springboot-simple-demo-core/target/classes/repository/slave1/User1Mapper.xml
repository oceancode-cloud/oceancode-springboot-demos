<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.springboot.simple.demo.core.mapper.slave1.User1Mapper">
    <insert id="insertOne" parameterType="com.springboot.simple.demo.core.domain.User1"  useGeneratedKeys="true" keyProperty="id">
        INSERT INTO `t_user`
        <trim prefix = "(" suffix = ")" suffixOverrides = ",">
        `id`,
        `password`,
        `username`,
        </trim>
        <trim prefix = "VALUES(" suffix = ")" suffixOverrides=",">
        #{id},
        #{password},
        #{username},
        </trim>
    </insert>


    <delete id="deleteByIdWithBusiness">
        DELETE FROM `t_user`
        WHERE
        `id` = #{id}
    </delete>

    <delete id="deleteById">
        DELETE FROM `t_user`
        WHERE
        `id` = #{id}
    </delete>

    <delete id="deleteByIds">
        DELETE FROM `t_user`
        WHERE
        `id` IN
        <foreach collection="list" open="(" close=")" separator="," item="item">
        #{item}
        </foreach>
    </delete>
    <delete id="deleteOne" parameterType="com.springboot.simple.demo.core.domain.User1">
        DELETE FROM `t_user`
        WHERE
        <trim prefix = "" suffix = "" suffixOverrides = "AND">
        <if test="id != null ">`id` = #{id} AND </if>
        <if test="password != null ">`password` = #{password} AND </if>
        <if test="username != null ">`username` = #{username} AND </if>
        </trim>
    </delete>

    <update id="updateById" parameterType="com.springboot.simple.demo.core.domain.User1">
        UPDATE `t_user` SET
        <trim prefix = "" suffix = "" suffixOverrides = ",">
        <if test="password != null ">`password` = #{password} , </if>
        <if test="username != null ">`username` = #{username} , </if>
        </trim>
        WHERE
        `id` = #{id}
    </update>

    <update id="updateByIdWithBusiness" parameterType="com.springboot.simple.demo.core.domain.User1">
        UPDATE `t_user` SET
        <trim prefix = "" suffix = "" suffixOverrides = ",">
        <if test="password != null ">`password` = #{password} , </if>
        <if test="username != null ">`username` = #{username} , </if>
        </trim>
        WHERE
        `id` = #{id}
    </update>

    <select id="selectById" resultType="com.springboot.simple.demo.core.domain.User1" parameterType="Long">
        SELECT
        `id` AS `id`,
        `password` AS `password`,
        `username` AS `username`
        FROM `t_user`
        WHERE
        `id` = #{id}
    </select>

    <select id="selectByUniqueColumn" resultType="com.springboot.simple.demo.core.domain.User1">
        SELECT
        `id` AS `id`,
        `password` AS `password`,
        `username` AS `username`
        FROM `t_user`
        WHERE
        `${column}` = #{columnValue}
    </select>

    <select id="existsByUniqueColumn" resultType="boolean">
        SELECT EXISTS(
          SELECT
          id AS `id`
          FROM `t_user`
          WHERE
        `${column}` = #{columnValue}
        ) as `value`
    </select>

    <select id="selectByIdWithBusiness" resultType="com.springboot.simple.demo.core.domain.User1" parameterType="Long">
        SELECT
        `id` AS `id`,
        `password` AS `password`,
        `username` AS `username`
        FROM `t_user`
        WHERE
        `id`=#{id}
    </select>

    <select id="selectByIds" resultType="com.springboot.simple.demo.core.domain.User1" parameterType="Long">
        SELECT
        `id` AS `id`,
        `password` AS `password`,
        `username` AS `username`
        FROM `t_user`
        WHERE
        `id` IN
        <foreach collection="list" open="(" close=")" separator="," item="item">
        #{item}
        </foreach>
    </select>

    <select id="selectOne" resultType="com.springboot.simple.demo.core.domain.User1" parameterType="com.springboot.simple.demo.core.domain.User1">
        SELECT
        `id` AS `id`,
        `password` AS `password`,
        `username` AS `username`
        FROM `t_user`
        WHERE
        <trim prefix = "" suffix = "" suffixOverrides = "AND">
        <if test="id != null ">`id` = #{id} AND </if>
        <if test="password != null ">`password` = #{password} AND </if>
        <if test="username != null ">`username` = #{username} AND </if>
        </trim>
        LIMIT 2
    </select>

    <select id="existsById" resultType="Integer">
        SELECT 1
        FROM `t_user`
        WHERE
        `id` = #{id}
    </select>

    <select id="existsByIds" resultType="int">
        SELECT COUNT(*)
        FROM `t_user`
        WHERE
        `id` IN
        <foreach collection="list" open="(" close=")" separator="," item="item">
        #{item}
        </foreach>
    </select>


</mapper>
